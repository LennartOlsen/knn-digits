{
    "collab_server" : "",
    "contents" : "##\n# kNN function for for images\n# Requies loadimage.r to be sourced\n# Ex :\n# source(\"/Users/lennartolsen/dev/machine-learning/excersise1/trunk/Basefolder/loadImage.R\")\n##\nrequire(\"ggplot2\")\ndataset <- loadSinglePersonsData(300, \"group12\", 1, \"2017/\");\ndataset <- data.frame(dataset)\nset.seed(42)\ndataset_shuffle <- dataset[sample(nrow(dataset)),]\n\n##Create a split set that generates a set of 1's and 0's, to further split the dataset\n#split_set <- sample(2, nrow(dataset_shuffle), replace=TRUE, prob=c(0.5, 0.5))\n\ndataset_train <- dataset_shuffle[1:2000,2:100]\ndataset_test <- dataset_shuffle[2001:4000,2:100]\ndataset_train_labels <- dataset_shuffle[1:2000,1]\ndataset_test_labels <- dataset_shuffle[2001:4000,1]\n\n##TEST WITH K = 3\ndataset_pred <- knn(train = dataset_train, test = dataset_test, cl=dataset_train_labels, k=3)\n##CrossTable(x= dataset_test_labels, y = dataset_pred,prop.chisq=FALSE)\nconfidence <- table(dataset_test_labels, dataset_pred)\naccuracy <- sum(diag(confidence)) / sum(confidence)\n\n\n## TEST WITH MANY K's\nrange <- 1:100\naccs <- rep(0, length(range))\nspeeds <- rep(0, length(range))\n\nfor (k in range) {\n    startTime <- Sys.time();\n    #make predictions using knn: pred\n    dataset_pred <- knn(train = dataset_train, test = dataset_test, cl=dataset_train_labels, k=k)\n\n    #construct the confusion matrix: conf\n    confidence <- table(dataset_test_labels, dataset_pred)\n   \n    #calculate the accuracy and store it in accs[k]\n    accs[k] <- sum(diag(confidence)) / sum(confidence)\n    \n    endTime <- Sys.time()\n    speeds[k] <- endTime - startTime\n    print(k)\n}\n \n# Plot the accuracies. Title of x-axis is \"k\".\nqplot(seq_along(accs), accs)+geom_point() + geom_smooth(method=\"lm\",formula = y ~ splines::bs(x,3), se=FALSE)\nqplot(seq_along(speeds), speeds)+geom_point() + geom_smooth(method=\"lm\",formula = y ~ splines::bs(x,3), se=FALSE)\n \n# Calculate the best k\nwhich.max(accs)\n\n",
    "created" : 1486898993938.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "504434000",
    "id" : "50BDAC29",
    "lastKnownWriteTime" : 1486914392,
    "last_content_update" : 1486914392705,
    "path" : "~/dev/machine-learning/r/excersise1/main.R",
    "project_path" : "main.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}